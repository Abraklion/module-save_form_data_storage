class SaveFormDataStorage{static getObjectStorage(a){return JSON.parse(localStorage.getItem(a))}static setObjectStorage(a,b){localStorage.setItem(a,JSON.stringify(b))}static btnCreate(b,c){let a=document.createElement("button");return a.setAttribute("type","button"),a.classList.add("btn"),a.append(c),b.append(a),a}constructor(a,b,{btnText:c,parentSelectorBtn:d}){this.form=document.querySelector(a),this.propertyNameStorage=`${a}-data`,this.parentSelectorBtn=document.querySelector(d)||this.form,this.btnText=c||"\u0414\u043E\u0441\u0442\u0430\u0442\u044C \u0438\u0437 \u0445\u0440\u0430\u043D\u0438\u043B\u0438\u0449\u0430",this.#a(b)} #a(a){localStorage.getItem(this.propertyNameStorage)||localStorage.setItem(this.propertyNameStorage,"{}"),a.forEach(a=>{this.#b(a.selector,a.event)}),this.#c()} #b(b,e){let c=this.form.querySelectorAll(b);c.forEach((a,c)=>{a.addEventListener(e,f=>{f.preventDefault();let d=SaveFormDataStorage.getObjectStorage(this.propertyNameStorage),g="SELECT"!==a.nodeName?a.getAttribute("type"):"select";switch(g){case"checkbox":Array.isArray(d[b])||(d[b]=[]),a.checked?d[b].includes(c)||d[b].push(c):d[b].splice(d[b].indexOf(c),1),SaveFormDataStorage.setObjectStorage(this.propertyNameStorage,d);break;case"select":d[b]=[];for(let e=0;e<a.options.length;e++)a.options[e].selected&&d[b].push(e);SaveFormDataStorage.setObjectStorage(this.propertyNameStorage,d);break;default:d[b]=a.value,SaveFormDataStorage.setObjectStorage(this.propertyNameStorage,d)}})})} #c(){if(Object.keys(SaveFormDataStorage.getObjectStorage(this.propertyNameStorage)).length){let d=SaveFormDataStorage.btnCreate(this.parentSelectorBtn,this.btnText);d.addEventListener("click",()=>{let a=SaveFormDataStorage.getObjectStorage(this.propertyNameStorage);Object.keys(a).forEach(c=>{let b=this.form.querySelectorAll(c);"object"!=typeof a[c]?1===b.length?b[0].value=a[c]:b.forEach(b=>{b.value===a[c]&&(b.checked=!0)}):b.forEach((b,e)=>{if("SELECT"===b.nodeName)for(let d=0;d<b.options.length;d++)a[c].includes(d)&&(b.options[d].selected=!0);else a[c].includes(e)&&(b.checked=!0)})})})}}}